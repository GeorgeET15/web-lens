{
  "name": "E2E Shop Flow",
  "description": "Demonstrates Structural Intent (Cart) and Variable Interpolation",
  "entry_block": "block_1",
  "blocks": [
    {
      "id": "block_1",
      "type": "open_page",
      "url": "https://www.saucedemo.com",
      "next_block": "block_2"
    },
    {
      "id": "block_2",
      "type": "verify_page_title",
      "expected_title": "Swag Labs",
      "next_block": "block_3"
    },
    {
      "id": "block_3",
      "type": "enter_text",
      "text": "{{USER_NAME}}",
      "element": {
        "id": "el_user",
        "role": "textbox",
        "name": "Username",
        "confidence": "high"
      },
      "description": "Enter Username from Variables",
      "next_block": "block_4"
    },
    {
      "id": "block_4",
      "type": "enter_text",
      "text": "secret_sauce",
      "element": {
        "id": "el_pass",
        "role": "textbox",
        "name": "Password",
        "confidence": "high"
      },
      "description": "Enter Password",
      "next_block": "block_5"
    },
    {
      "id": "block_5",
      "type": "click_element",
      "element": {
        "id": "el_login",
        "role": "button",
        "name": "Login",
        "confidence": "high"
      },
      "description": "Click Login",
      "next_block": "block_6"
    },
    {
      "id": "block_6",
      "type": "verify_url",
      "expected_fragment": "inventory.html",
      "next_block": "block_7"
    },
    {
      "id": "block_7",
      "type": "save_text",
      "variable_key": "PRODUCT_NAME",
      "element": {
        "id": "el_prod_1",
        "role": "link",
        "name": "Sauce Labs Backpack",
        "confidence": "high"
      },
      "description": "Save product name to variable",
      "next_block": "block_8"
    },
    {
      "id": "block_8",
      "type": "click_element",
      "element": {
        "id": "el_add_cart",
        "role": "button",
        "name": "Add to cart",
        "confidence": "high"
      },
      "description": "Add product to cart",
      "next_block": "block_9"
    },
    {
      "id": "block_9",
      "type": "click_element",
      "element": {
        "id": "el_cart_icon",
        "role": "link",
        "name": "cart",
        "intent_type": "structural",
        "system_role": "cart",
        "confidence": "declared",
        "verification_required": true,
        "context": {
            "region": "header"
        }
      },
      "description": "Click Cart Icon (Structural Intent)",
      "next_block": "block_10"
    },
    {
      "id": "block_10",
      "type": "assert_visible",
      "element": {
        "id": "el_dynamic_prod",
        "role": "div",
        "name": "{{PRODUCT_NAME}}",
        "confidence": "low"
      },
      "description": "Verify Dynamic Product Name in Cart",
      "next_block": "block_11"
    },
    {
      "id": "block_11",
      "type": "wait_until_visible",
      "timeout_seconds": 5,
      "element": {
        "id": "el_checkout",
        "role": "button",
        "name": "Checkout",
        "confidence": "high"
      },
      "next_block": "block_12"
    },
    {
      "id": "block_12",
      "type": "click_element",
      "element": {
        "id": "el_checkout",
        "role": "button",
        "name": "Checkout",
        "confidence": "high"
      },
      "description": "Proceed to Checkout",
      "next_block": null
    }
  ]
}
